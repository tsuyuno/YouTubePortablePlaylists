!function(){"use strict";function e(e){return new Promise(function(t){Array.isArray(e)?re.storage.local.get(e,function(e){t(JSON.parse(JSON.stringify(e)))}):re.storage.local.get(e,function(n){t(JSON.parse(JSON.stringify(n))[e])})})}function t(e){return oe?void re.tabs.create({url:e}):void window.open(e,"_blank")}function n(){return V.userid+"-"+V.pageid}function r(e,t){var n=JSON.parse(JSON.stringify(e)),r=JSON.parse(JSON.stringify(t));return new Promise(function(e){var t={};"string"==typeof n?t[n]=r:t=n,re.storage.local.set(JSON.parse(JSON.stringify(t)),e)})}function o(e){return new Promise(function(t){re.storage.local.remove(e,t)})}function i(t){return e(n()+"-"+t)}function a(e,t){return r(n()+"-"+e,t)}function s(e){return o(n()+"-"+e)}function u(e){return new Promise(function(t,n){var r=new XMLHttpRequest;return r.open(e.type||"GET",e.url),r.addEventListener("load",function(){if(200===r.status){if("TEXT"===e.dataType||"string"!=typeof e.dataType)return void t(r.responseText);if("XML"===e.dataType)return void t(r.responseXML);"JSON"===e.dataType&&t(JSON.parse(r.responseText))}else n({error:r.status,body:r.responseText})}),r.addEventListener("error",n),e.requestHeaders&&Object.keys(e.requestHeaders).forEach(function(t){var n=e.requestHeaders[t];null!==n&&"undefined"!=typeof n&&r.setRequestHeader(t,n)}),"JSON"===e.dataType&&r.overrideMimeType("application/json"),r.send(e.data),r})}function c(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split(""),n="",r=0;e>r;r++)n+=t[Math.floor(Math.random()*t.length)];return n}function d(e){var t=[];for(var n in e)null!==e[n]&&"undefined"!=typeof e[n]&&"undefined"!==e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return 0===t.length?"":"?"+t.join("&")}function p(e,t){return e+d(t)}function l(e,t,n){for(var r=e;r.indexOf(t)>-1;)r=r.replace(t,n);return r}function f(e){if("string"!=typeof e)return null;var t=e;t.startsWith("http:")&&(t=t.replace("http:","https:")),t.startsWith("//")&&(t=t.replace("//","https://")),t.startsWith("https://")||(t="https://"+t);var n=t.split("/");return n.pop(),n.pop(),t=n.join("/")+"/mo/"}function h(e){return e[1].map(function(e){var t=e[7].toString(),n=e[10],r=null!==e[8]&&21===e[8].length?e[8]:"none",o=[t,n,r].join("-");return{key:o,authuser:t,userid:n,pageid:r,email:e[3],name:e[2],photo:f(e[4])}})}function m(){return u({url:"https://accounts.google.com/ListAccounts?listPages=1&json=standard&origin=https%3A%2F%2Fwww.google.com"}).then(function(e){var t=e;return t=l(t,"\\x","%"),t=decodeURIComponent(t),t=t.substring(t.indexOf("[")),t=t.split("]"),t.pop(),t=t.join("]")+"]",t=JSON.parse(t),h(t)})}function w(){return I({originRequest:!0,url:"https://accounts.google.com/ListAccounts?listPages=1&json=standard&source=ChromiumBrowser",type:"POST",dataType:"JSON",withCredentials:!0}).then(h)}function y(){return u({url:"https://www.google.com/?gws_rd=cr&authuser=0"}).then(function(e){var t=[];try{var n=e.split('href="https://www.google.com/webhp?authuser=');if(n[1])for(var r=1;r<n.length;r++){var o=n[r],i=o.split('"')[0],a="1",s="none",u=[i,a,s].join("-");t.push({key:u,authuser:i,photo:f(o.split('data-src="')[1].split('"')[0]),name:o.split('">')[4].split("<")[0],email:o.split('">')[5].split("<")[0].split(" ")[0],pageid:s,userid:a})}}catch(c){}return t})}function v(){return e("g-accounts-list").then(function(e){return Array.isArray(e)?e:[]})}function O(){return $||($=m()["catch"](w)["catch"](y).then(function(e){return e},function(){return[]}).then(function(e){return r("g-accounts-list",e),e})),$}function q(e){return e?v():O()}function T(e){console.log(e),V=e,r("g-accounts-current",e),oe||location.reload()}function A(){t("https://accounts.google.com/addsession?continue=https%3A%2F%2Fwww.google.com%2Fg-api%2Fsignin"),window.close()}function S(){t("https://accounts.google.com/logout?continue=https%3A%2F%2Fwww.google.com%2Fg-api%2Fsignout"),window.close()}function P(e,t){0===e.length?(V={authuser:"0",pageid:"none"},o("g-accounts-current"),t&&location.reload()):T(e[0])}function k(){return e("g-accounts-current").then(function(e){return e&&e.key?(V=e,O().then(function(e){var t=!1;e.forEach(function(e){V.key===e.key&&(t=!0)}),t===!1&&P(e,!0)})):O().then(P)})}function N(e){return pe?le:(pe=!0,Q=e.clientId,K=e.key,e.lang&&(ce=e.lang),window.___gcfg={lang:ce,parsetags:"explicit"},Y(),k().then(function(){W="none"===V.pageid?ae:se,g.clientId=Q,g.key=K,g.lang=ce,g.account=V,g.signedIn=V.hasOwnProperty("key"),Z()}),le)}function x(e){return u({url:p("https://www.googleapis.com/oauth2/v3/tokeninfo",{access_token:e.access_token,fields:"aud,scope,exp",prettyPrint:!1}),dataType:"JSON"})}function J(){return te||(te=new Promise(function(e,t){var n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.async=!0,n.addEventListener("load",function(){e(window.gapi)}),n.addEventListener("error",function(){t()}),document.head.appendChild(n)})),te}function b(e){return de[e]||(de[e]=J().then(function(t){return new Promise(function(n){t.load(e,n)})})),de[e]}function C(e){return fe.then(function(){if(Array.isArray(e)){var t=e.map(function(e){return b(e)});return Promise.all(t)}return b(e)})}function H(e,t,n){var r=!1,o=e;return-1!==o.indexOf("#")&&(r=o.split("#")[1],o=o.split("#")[0]),o+=-1===o.indexOf("?")?"?":"&",o+=t+"="+encodeURIComponent(n),r!==!1&&(o+="#"+r),o}function j(){return ee||(ee=new Promise(function(e){function t(r){r.data.gApiRequestReady&&e(n),window.removeEventListener("message",t)}var n=document.createElement("iframe");n.src="https://www.google.com/g-api/request",n.setAttribute("style","display: none !important;"),window.addEventListener("message",t),document.body.appendChild(n)})),ee}function E(e){var t=JSON.parse(JSON.stringify(e));return j().then(function(e){return new Promise(function(n,r){var o=Date.now().toString()+c(8);window.addEventListener("message",function(e){e.data.requestId===o&&(e.data.error||!e.data.result?r(e.data.error):n(e.data.result))});var i=t.url.replace("https://www.googleapis.com","https://clients6.google.com").replace("https://www.google.com","https://clients6.google.com");le.then(function(){t.key!==!1&&(i=H(i,"key",t.key||K)),e.contentWindow.postMessage({method:"apiRequest",ajax:{authuser:V.authuser,pageid:V.pageid,type:t.type,url:i,dataType:t.dataType,data:t.data,requestHeaders:t.requestHeaders,withCredentials:t.withCredentials},requestId:o},"https://"+(t.subDomain||"www")+".google.com/g-api/request")})})})}function _(e){var t=e.scope||[W];return X(t).then(function(t){return e.requestHeaders=e.requestHeaders||{},e.requestHeaders.Authorization||(e.requestHeaders.Authorization="Bearer "+t),u({type:e.type,url:e.url,dataType:e.dataType,data:e.data,requestHeaders:e.requestHeaders,withCredentials:e.withCredentials})})}function L(e){var t=e.url;return e.key!==!1&&(t=H(t,"key",e.key||K)),u({type:e.type,url:t,dataType:e.dataType,data:e.data,requestHeaders:e.requestHeaders,withCredentials:e.withCredentials})}function R(e){var t=JSON.parse(JSON.stringify(e));return j().then(function(e){return new Promise(function(n,r){var o=Date.now().toString()+c(8);window.addEventListener("message",function(e){e.data.requestId===o&&(e.data.error||!e.data.result?r(e.data.error):n(e.data.result))}),e.contentWindow.postMessage({method:"originRequest",ajax:{type:t.type,url:t.url,dataType:t.dataType,data:t.data,requestHeaders:t.requestHeaders,withCredentials:t.withCredentials},requestId:o},"https://"+(t.subDomain||"www")+".google.com/g-api/request")})})}function I(e){return e.originRequest===!0?R(e):e.notAuthenticated===!0?L(e):ie||e.internal!==!0?_(e):E(e)["catch"](function(){return _(e)})}function F(e){return p("https://accounts.google.com/o/oauth2/auth",{redirect_uri:"https://www.google.com/g-api/auth",response_type:"token",include_granted_scopes:!0,scope:e.scope,immediate:e.immediate,state:e.state,client_id:e.client_id,authuser:e.authuser,pageId:e.pageid})}function M(e){le.then(function(){var n=[];if("string"==typeof e&&(n=Array.prototype.slice.call(arguments)),Array.isArray(e)&&(n=e),0!==n.length){n.push(W);var r=F({scope:n.join(" "),immediate:!1,state:"permissionRequest",client_id:Q,authuser:V.authuser,pageid:V.pageid});t(r),window.close()}})}function z(e){var t=e||0;return t>5?Promise.resolve({error:!0}):new Promise(function(e){function n(i){if("https://www.google.com"===i.origin&&i.data.timestamp===o.toString()&&"getToken"===i.data.method)if(window.removeEventListener("message",n),document.body.removeChild(r),i.data.error)"immediate_failed"===i.data.error?(ue=[],e({error:"notAuthorized"})):e(z(t));else{var a=i.data.result.access_token;x(i.data.result).then(function(n){n.aud!==Q?e(z(t)):(n.token=a,B=a,ue=n.scope?n.scope.split(" "):[],G=1e3*n.exp,e(n))},function(){e(z(t))})}}t++;var r,o=Date.now();window.addEventListener("message",n),r=document.createElement("iframe"),r.setAttribute("style","display: none !important;"),r.src=F({immediate:!0,client_id:Q,authuser:V.authuser,pageid:V.pageid,state:o,scope:W}),document.body.appendChild(r)})}function D(){return ne||(ne=Promise.resolve().then(function(){var e=B&&Date.now()<G-500;return e?void 0:z()}).then(function(){ne=!1})),ne}function X(e){return new Promise(function(t,n){var r=Array.isArray(e)?e:Array.prototype.slice.call(arguments);le.then(D).then(function(){var o=ue,i=r.every(function(e){return-1!==o.indexOf(e)});i?t(B):n({error:"notAuthorized",authorize:function(){M(e)}})})})}function U(){return le.then(function(){function e(){var e="n/bg/fetchcount",t=JSON.stringify([[],[null,null,null,null,"OGB"]]);return r(e,{"f.req":t}).then(function(e){return e[1]})}function t(){return u({url:n+"app/basic/home"}).then(function(e){var t=0;try{t=e.split('class="w4"')[1].split(">")[1].split("<")[0]}catch(n){return Promise.reject(n)}return t})}var n="https://plus.google.com/u/"+V.authuser+"/";V.pageid&&"none"!==V.pageid&&(n+="b/"+V.pageid+"/");var r=function(){function e(e,t,r){r.at=e;var o=[];for(var i in r)o.push(i+"="+encodeURIComponent(r[i]));return o=o.join("&"),u({type:"POST",url:n+"_/"+t+(-1!==t.indexOf("?")?"&":"?")+"rt=j",requestHeaders:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},data:o})}var t=bm.cache.get("gplusXrsfToken"),r=["f.ri","di","e"];return function(n,o){return t.then(function(r){return e(r,n,o)["catch"](function(r){var i=r.body;if(-1!==i.indexOf('"xsrf","')){var a=i.split('"xsrf","')[1].split('"')[0];return bm.cache.set("gplusXrsfToken",a),t=Promise.resolve(a),e(a,n,o)}return Promise.reject()})}).then(function(e){var t=e;t=l(t,"\n",""),t=l(t,",,",",null,"),t=l(t,"[,","[null,"),t=t.replace(")]}'",""),t=JSON.parse(t),t=t[0];for(var n=0;n<t.length;n++)if(r.indexOf(t[n][0]))return t[n]})}}();return e()["catch"](t).then(function(e){var t=e;return"string"==typeof t&&(t=parseInt(t,10)),isNaN(t)&&(t=0),t})})}var W,B,G,K,Q,V,Z,Y,$,ee,te,ne,re=window.chrome,oe=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),ie=-1!==navigator.userAgent.indexOf("OPR"),ae="https://www.googleapis.com/auth/plus.me",se="https://www.googleapis.com/auth/youtube.readonly",ue=[],ce="en",de={},pe=!1,le=new Promise(function(e){Z=e}),fe=new Promise(function(e){Y=e});window.g={getNotificationsCount:U,init:N,initialized:le,request:I,modules:{load:C},auth:{requestPermission:M,getAccessToken:X},accounts:{list:q,add:A,signout:S,change:T},cache:{get:i,set:a,remove:s}}}();